{"ast":null,"code":"import _slicedToArray from\"C:/Users/Richard/FullstackDevelopment2022/Part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import PersonsDisplay from'./components/PersonsDisplay';import Header from'./components/Header';import PhoneForm from'./components/PhoneForm';import NameFilter from'./components/NameFilter';import Phonebook from'./services/Phonebook';import SuccessMessage from'./components/SuccessMessage';import FailureMessage from'./components/FailureMessage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newFilter=_useState8[0],setNewFilter=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),successMsg=_useState10[0],setSuccessMsg=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),failureMsg=_useState12[0],setFailureMsg=_useState12[1];var phonebookTitle=\"Phonebook\";var numbersTitle=\"Numbers\";var formTitle=\"Add a new person\";var addPerson=function addPerson(event){event.preventDefault();var newPerson={name:newName,number:newNumber};if(persons.some(function(person){return person.name===newName;})){if(window.confirm(\"\".concat(newName,\" is already added to the phonebook, would you like to replace the old number with the new one?\"))){var oldPerson=persons.filter(function(person){return person.name===newName;});//find() was probably easier in hindsight\nPhonebook.updatePerson(oldPerson[0].id,newPerson).then(function(updatedPerson){setPersons(persons.map(function(person){return person.id!==oldPerson[0].id?person:updatedPerson;}));setNewName('');setNewNumber('');setSuccessMsg(\"Successfully updated \".concat(updatedPerson.name));setTimeout(function(){setSuccessMsg(null);},5000);}).catch(function(error){setFailureMsg(\"The person does no longer exist\");setTimeout(function(){setFailureMsg(null);},5000);setPersons(persons.filter(function(person){return person.name!==newPerson.name;}));setNewName('');setNewNumber('');});}return;}Phonebook.createPerson(newPerson).then(function(createdPerson){setPersons(persons.concat(createdPerson));setNewName('');setNewNumber('');setSuccessMsg(\"Successfully added \".concat(createdPerson.name));setTimeout(function(){setSuccessMsg(null);},5000);}).catch(function(error){setFailureMsg(\"Adding the person to the database failed\");setTimeout(function(){setFailureMsg(null);},5000);setPersons(persons.filter(function(person){return person.name!==newPerson.name;}));setNewName('');setNewNumber('');});};var deletePerson=function deletePerson(name){var deleteThisPerson=persons.find(function(person){return person.name===name;});if(window.confirm(\"Are you sure you want to delete \".concat(deleteThisPerson.name,\"? \"))){Phonebook.deletePerson(deleteThisPerson.id).then(function(){setPersons(persons.filter(function(person){return person.name!==name;}));setSuccessMsg(\"Successfully deleted \".concat(name));setTimeout(function(){setSuccessMsg(null);},5000);}).catch(function(error){setFailureMsg(\"The person is already deleted\");setTimeout(function(){setFailureMsg(null);},5000);setPersons(persons.filter(function(person){return person.name!==name;}));});}};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleFilterChange=function handleFilterChange(event){setNewFilter(event.target.value);};var showPersons=function showPersons(){if(newFilter===''){return persons;}else{return persons.filter(function(person){return person.name.toLowerCase().includes(newFilter.toLowerCase());});}};useEffect(function(){Phonebook.getAllPersons().then(function(allPersons){setPersons(allPersons);});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{header:phonebookTitle}),/*#__PURE__*/_jsx(SuccessMessage,{message:successMsg}),/*#__PURE__*/_jsx(FailureMessage,{message:failureMsg}),/*#__PURE__*/_jsx(NameFilter,{inputNameValue:newFilter,inputNameChangeFunc:handleFilterChange}),/*#__PURE__*/_jsx(Header,{header:formTitle}),/*#__PURE__*/_jsx(PhoneForm,{submitFunc:addPerson,inputNameValue:newName,inputNameChangeFunc:handleNameChange,inputPhoneValue:newNumber,inputPhoneChangeFunc:handleNumberChange}),/*#__PURE__*/_jsx(Header,{header:numbersTitle}),/*#__PURE__*/_jsx(PersonsDisplay,{persons:showPersons(),deleteFunc:deletePerson})]});};export default App;","map":{"version":3,"sources":["C:/Users/Richard/FullstackDevelopment2022/Part2/phonebook/src/App.js"],"names":["useState","useEffect","PersonsDisplay","Header","PhoneForm","NameFilter","Phonebook","SuccessMessage","FailureMessage","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","successMsg","setSuccessMsg","failureMsg","setFailureMsg","phonebookTitle","numbersTitle","formTitle","addPerson","event","preventDefault","newPerson","name","number","some","person","window","confirm","oldPerson","filter","updatePerson","id","then","updatedPerson","map","setTimeout","catch","error","createPerson","createdPerson","concat","deletePerson","deleteThisPerson","find","handleNameChange","target","value","handleNumberChange","handleFilterChange","showPersons","toLowerCase","includes","getAllPersons","allPersons"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport PersonsDisplay from './components/PersonsDisplay'\nimport Header from './components/Header'\nimport PhoneForm from './components/PhoneForm'\nimport NameFilter from './components/NameFilter'\nimport Phonebook from './services/Phonebook'\nimport SuccessMessage from './components/SuccessMessage'\nimport FailureMessage from './components/FailureMessage'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [successMsg, setSuccessMsg ] = useState(null)\n  const [failureMsg, setFailureMsg ] = useState(null)\n\n  const phonebookTitle = \"Phonebook\"\n  const numbersTitle = \"Numbers\"\n  const formTitle = \"Add a new person\"\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n    if(persons.some(person => person.name === newName)){\n      if(window.confirm(`${newName} is already added to the phonebook, would you like to replace the old number with the new one?`)) {\n        const oldPerson = persons.filter(person => person.name === newName) //find() was probably easier in hindsight\n        Phonebook.updatePerson(oldPerson[0].id, newPerson)\n          .then(updatedPerson => {\n            setPersons(persons.map(person => person.id !== oldPerson[0].id ? person : updatedPerson))\n            setNewName('')\n            setNewNumber('')\n            setSuccessMsg(`Successfully updated ${updatedPerson.name}`)\n            setTimeout(() => {\n              setSuccessMsg(null)\n            }, 5000)\n          })\n        .catch(error => { \n          setFailureMsg(`The person does no longer exist`)\n          setTimeout(() => {\n            setFailureMsg(null)\n          }, 5000)\n          setPersons(persons.filter(person => person.name !== newPerson.name))\n          setNewName('')\n          setNewNumber('')\n        })\n      }\n      return\n    }\n    Phonebook.createPerson(newPerson)\n      .then(createdPerson => {\n        setPersons(persons.concat(createdPerson))\n        setNewName('')\n        setNewNumber('')\n        setSuccessMsg(`Successfully added ${createdPerson.name}`)\n        setTimeout(() => {\n          setSuccessMsg(null)\n        }, 5000)\n      })\n    .catch(error => { \n      setFailureMsg(`Adding the person to the database failed`)\n      setTimeout(() => {\n        setFailureMsg(null)\n      }, 5000)\n      setPersons(persons.filter(person => person.name !== newPerson.name))\n      setNewName('')\n      setNewNumber('')\n    })\n  }\n\n  const deletePerson = name => {\n    const deleteThisPerson = persons.find(person => person.name === name)\n    if(window.confirm(`Are you sure you want to delete ${deleteThisPerson.name}? `)) {\n      Phonebook.deletePerson(deleteThisPerson.id)\n        .then(()=> {\n          setPersons(persons.filter(person => person.name !== name))\n          setSuccessMsg(`Successfully deleted ${name}`)\n          setTimeout(() => {\n            setSuccessMsg(null)\n          }, 5000)\n        })\n      .catch(error => { \n        setFailureMsg(`The person is already deleted`)\n        setTimeout(() => {\n          setFailureMsg(null)\n        }, 5000)\n        setPersons(persons.filter(person => person.name !== name))\n      })\n    }\n  }\n  \n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  const showPersons = () => {\n    if(newFilter==='') {\n      return persons\n    }\n    else {\n      return persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\n    }\n  }\n  \n  useEffect(() => { \n    Phonebook.getAllPersons()\n      .then(allPersons => {\n        setPersons(allPersons)\n      })\n  }, [])\n\n  return (\n    <div>\n      <Header header={phonebookTitle}/>\n      <SuccessMessage message={successMsg}/>\n      <FailureMessage message={failureMsg}/>\n      <NameFilter inputNameValue={newFilter} inputNameChangeFunc={handleFilterChange}/>\n      <Header header={formTitle}/>\n      <PhoneForm submitFunc={addPerson} inputNameValue={newName} inputNameChangeFunc={handleNameChange} inputPhoneValue={newNumber} inputPhoneChangeFunc={handleNumberChange}/>\n      <Header header={numbersTitle}/>\n      <PersonsDisplay persons={showPersons()} deleteFunc={deletePerson}/>\n    </div>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}